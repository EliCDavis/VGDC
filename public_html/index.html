<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>VGDC</title>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script src="js/libs/jquery/jquery.min.js"></script>

        <script src="js/libs/ko/knockout-3.3.0.js"></script>
        <script src="js/libs/bootstrap-3.3.5-dist/js/bootstrap.js"></script>
        <script src ="js/libs/github/github.js"></script>

        <link href="js/libs/bootstrap-3.3.5-dist/css/bootstrap.css" rel="stylesheet">
        
        <link href="js/libs/magic/magic.min.css" rel="stylesheet">

        <link rel="apple-touch-icon" sizes="57x57" href="apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
        <link rel="manifest" href="manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
        <link rel="shortcut icon" href="favicon.ico">

        <style>
            body {
                  background-color: #c12e2a
            }

            h1   {
                color:blue
            }


        </style>

    </head>

    <body>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#"><img alt="Brand" src="favicon.ico"></a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">

                        <li><a href="#">Announcements</a></li>
                        <li><a href="#">Events</a></li>
                        <li><a href="https://www.reddit.com/r/MSUVGDC/">Discussion</a></li>
                        <li><a href="http://www.videogamedev.club/">Resource Archive</a></li>

                    </ul>

                    <ul class="nav navbar-nav navbar-right">

                        <li><a href="#"><b>Contact Us</b></a></li>

                    </ul>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>

        <div class="container">

            <div class="row">
                <div class="col-md-8" id="announcements-panel">

                    
                    <div data-bind="if: viewType() == 'Jumbo'">
                    
                        <div class="jumbotron" >
                            <h1 data-bind='text: postDisplayedTitle'></h1>
                            <i><p data-bind="text: postDisplayedSubtext"></p></i>
                            <p><a class="btn btn-danger btn" href="#" role="button" data-bind="click:displayFullAnnouncementText">Read</a></p>
                        </div>


                        <div>


                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Previous Announcements..</h3>
                                </div>
                                <div class="panel-body row">
                                    <div data-bind="foreach: postsLoaded">


                                        <div class="col-md-4">
                                            <img style='width:100%'data-bind="attr:{src: imageURL}, click: $parent.displayPost"  alt="..." class="img-rounded">
                                        </div>

                                    </div>
                                </div>
                            </div>


                        </div>
                        
                    </div>
                    
                    <div data-bind="if: viewType() == 'Reading'">
                        
                        <div class="panel panel-default" data-bind="with:postBeingDisplayed">
                            
                            <div class="panel-heading">

                                <h2 class="panel-title" >
                                    <button data-bind="click: $parent.displayJumboAnnouncement" type="button" class="btn btn-default btn-sm" aria-label="Left Align">
                                        <span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span>
                                    </button>
                                    <span data-bind="text: title"></span>
                                </h2>
                                
                            </div>
                            
                            <div class="panel-body">
                                
                                <img style='width:100%' 
                                    data-bind="attr:{src: imageURL}, 
                                    click: $parent.displayPost"  
                                    alt="..." class="img-rounded"><br/> <br/>
                                
                                <h3 data-bind="text: smallText"></h3><br />
                                
                                <p data-bind="text: postText" ></p>

                            </div>
                            
                        </div>
                        
                    </div>

                </div>

                <div class="col-md-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Our Last Meeting</h3>
                        </div>
                        <div class="panel-body">
                            Here goes php pulling from a table set up the logs all our meetings looking at the most recent date. This would just include a summary. A link for further reading would also be included. A Meetings log would be our "History". If we organize it nicely we could have people use the log for learning. If we had a talk on procedural generation using perlin
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="panel panel-default" >
                        <div class="panel-heading">
                            <h3 class="panel-title">Upcoming Events</h3>
                        </div>
                        <div class="panel-body">
                            Here would either be located a nice calender that would be pulling from our group's face book that includes all the clubs events, or what would more likely happen is using php we pull from a table meant for storing events. Doing so would probably end up in a list like format for events.
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <script>

            /**
             * Goes to reddit and grabs JSON representing posts made by the
             * reddit user "MSUVGDCAnnouncements" inside of the subreddit
             * msuvgdc.  If it's succesful it will call the cb function with
             * the data it received.
             *
             * @param {type} cb
             * @returns {undefined}
             */
            function getAnnouncementsJson(cb) {

                var xmlhttp = new XMLHttpRequest();

                xmlhttp.onreadystatechange = function () {

                    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {

                        var postData = JSON.parse(xmlhttp.responseText);
                        cb(postData);

                    } else {
                        cb();
                    }
                };

                xmlhttp.open("GET",
                        "http://www.reddit.com/r/MSUVGDC/search.json?q=author%3AMSUVGDCAnnouncements&sort=new&restrict_sr=on", true);

                xmlhttp.send();

            }

            /**
             *
             * @returns {undefined}
             */
            function AnnouncementsViewModel() {

                var self = this;

                /**
                 * There are three different ways for announcements to be 
                 * displayed, being either Jumbo, Reading, or Side
                 */
                self.viewType = ko.observable("Jumbo");

                self.postBeingDisplayed = ko.observable();

                self.postsLoaded = ko.observableArray();

                self.displayPost = function(post){
                    self.postBeingDisplayed(post);
                }

                
                self.displayFullAnnouncementText = function(){
                    
                    $('#announcements-panel').addClass('magictime rotateDown');
                    
                    setTimeout(function(){
                        
                        self.viewType("Reading");
                        
                        $('#announcements-panel').removeClass('magictime rotateDown');
                        $('#announcements-panel').addClass('magictime perspectiveDownRetourn');
                        
                        setTimeout(function(){
                            $('#announcements-panel').removeClass('magictime perspectiveDownRetourn');
                        },1000);
                        
                    },1000);
                        
                }
                
                self.displayJumboAnnouncement = function(){
                    $('#announcements-panel').addClass('magictime rotateDown');
                    
                    setTimeout(function(){
                        
                        self.viewType("Jumbo");
                        
                        $('#announcements-panel').removeClass('magictime rotateDown');
                        $('#announcements-panel').addClass('magictime perspectiveDownRetourn');
                        
                        setTimeout(function(){
                            $('#announcements-panel').removeClass('magictime perspectiveDownRetourn');
                        },1000);
                        
                    },1000);
                }
                

                self.postDisplayedTitle = ko.computed(function(){

                    if(self.postBeingDisplayed() != null){
                        return self.postBeingDisplayed().title;
                    }

                    return "Unable to load posts!";

                })

                self.postDisplayedSubtext = ko.computed(function(){

                    if(self.postBeingDisplayed() != null && self.postBeingDisplayed().smallText){
                        return self.postBeingDisplayed().smallText;
                    }

                    return "";
                })


                getAnnouncementsJson(function (data) {

                    if (data == null) {
                        return;
                    }

                    for (var i = 0; i < data.data.children.length; i++) {

                        var textPost = JSON.parse(data.data.children[i].data.selftext);

                        var post = {
                            "title": data.data.children[i].data.title,
                            "imageURL": textPost.image,
                            "postText": textPost.post,
                            "smallText": textPost.smallText
                        };

                        self.postsLoaded.push(post);

                    }

                    self.postBeingDisplayed(self.postsLoaded()[0]);

                });

            }

            ko.applyBindings(new AnnouncementsViewModel(), document.getElementById("announcements-panel"));

        </script>

    </body>

</html>
